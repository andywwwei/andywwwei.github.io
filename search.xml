<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>SpringCache</title>
      <link href="/2025/05/30/SpringCache/"/>
      <url>/2025/05/30/SpringCache/</url>
      
        <content type="html"><![CDATA[<p><strong>Spring ç¼“å­˜ï¼ˆSpring Cacheï¼‰æ˜¯ Spring æä¾›çš„ä¸€å¥—åŸºäºæ³¨è§£çš„ç¼“å­˜æŠ½è±¡æœºåˆ¶ï¼Œå¸¸ç”¨äºæå‡ç³»ç»Ÿæ€§èƒ½ã€å‡å°‘é‡å¤æŸ¥è¯¢æ•°æ®åº“æˆ–æ¥å£è°ƒç”¨ã€‚</strong></p><h2 id="âœ…-ä¸€ã€åŸºæœ¬åŸç†"><a href="#âœ…-ä¸€ã€åŸºæœ¬åŸç†" class="headerlink" title="âœ… ä¸€ã€åŸºæœ¬åŸç†"></a>âœ… ä¸€ã€åŸºæœ¬åŸç†</h2><p><strong>Spring Cache é€šè¿‡å¯¹æ–¹æ³•çš„è¿”å›ç»“æœè¿›è¡Œç¼“å­˜ï¼Œåç»­ç›¸åŒå‚æ•°çš„è°ƒç”¨å°†ç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–ï¼Œè€Œä¸æ˜¯å†æ¬¡æ‰§è¡Œæ–¹æ³•ã€‚</strong></p><h3 id="å¸¸ç”¨çš„æ³¨è§£ï¼š"><a href="#å¸¸ç”¨çš„æ³¨è§£ï¼š" class="headerlink" title="å¸¸ç”¨çš„æ³¨è§£ï¼š"></a>å¸¸ç”¨çš„æ³¨è§£ï¼š</h3><table><thead><tr><th>æ³¨è§£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>@EnableCaching</code></td><td>å¼€å¯ç¼“å­˜åŠŸèƒ½</td></tr><tr><td><code>@Cacheable</code></td><td>æœ‰ç¼“å­˜åˆ™ç”¨ç¼“å­˜ï¼Œæ— ç¼“å­˜åˆ™è°ƒç”¨æ–¹æ³•å¹¶ç¼“å­˜ç»“æœ</td></tr><tr><td><code>@CachePut</code></td><td>æ¯æ¬¡æ‰§è¡Œæ–¹æ³•ï¼Œå¹¶å°†è¿”å›ç»“æœæ”¾å…¥ç¼“å­˜ï¼ˆæ›´æ–°ç¼“å­˜ï¼‰</td></tr><tr><td><code>@CacheEvict</code></td><td>æ¸…é™¤ç¼“å­˜</td></tr><tr><td><code>@Caching</code></td><td>ç»„åˆå¤šä¸ªç¼“å­˜æ“ä½œæ³¨è§£</td></tr></tbody></table><h2 id="âœ…-äºŒã€ä½¿ç”¨ç¤ºä¾‹"><a href="#âœ…-äºŒã€ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="âœ… äºŒã€ä½¿ç”¨ç¤ºä¾‹"></a>âœ… äºŒã€ä½¿ç”¨ç¤ºä¾‹</h2><h2 id="1-æ·»åŠ ä¾èµ–ï¼ˆä½¿ç”¨-Caffeine-ä¸¾ä¾‹ï¼‰"><a href="#1-æ·»åŠ ä¾èµ–ï¼ˆä½¿ç”¨-Caffeine-ä¸¾ä¾‹ï¼‰" class="headerlink" title="1. æ·»åŠ ä¾èµ–ï¼ˆä½¿ç”¨ Caffeine ä¸¾ä¾‹ï¼‰"></a>1. æ·»åŠ ä¾èµ–ï¼ˆä½¿ç”¨ Caffeine ä¸¾ä¾‹ï¼‰</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.ben-manes.caffeine<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>caffeine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br></pre></td></tr></table></figure><h3 id="2-å¯ç”¨ç¼“å­˜"><a href="#2-å¯ç”¨ç¼“å­˜" class="headerlink" title="2. å¯ç”¨ç¼“å­˜"></a>2. å¯ç”¨ç¼“å­˜</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableCaching</span>  <span class="comment">// å¯ç”¨ç¼“å­˜åŠŸèƒ½æ³¨è§£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(App.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-ä½¿ç”¨ç¼“å­˜æ³¨è§£"><a href="#3-ä½¿ç”¨ç¼“å­˜æ³¨è§£" class="headerlink" title="3. ä½¿ç”¨ç¼“å­˜æ³¨è§£"></a>3. ä½¿ç”¨ç¼“å­˜æ³¨è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨æŸ¥è¯¢æ•°æ®åº“ï¼Œç»“æœä¼šè¢«ç¼“å­˜</span></span><br><span class="line">    <span class="meta">@Cacheable(cacheNames = &quot;user&quot;, key = &quot;#id&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUserById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢æ•°æ®åº“ä¸­çš„ç”¨æˆ·ä¿¡æ¯&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> userMapper.selectById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°ç”¨æˆ·åï¼Œç¼“å­˜ä¹Ÿè¦æ›´æ–°</span></span><br><span class="line">    <span class="meta">@CachePut(cacheNames = &quot;user&quot;, key = &quot;#user.id&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">updateUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        userMapper.updateById(user);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤ç”¨æˆ·æ—¶ï¼Œæ¸…é™¤ç¼“å­˜</span></span><br><span class="line">    <span class="meta">@CacheEvict(cacheNames = &quot;user&quot;, key = &quot;#id&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        userMapper.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-é…ç½®ç¼“å­˜ï¼ˆapplication-ymlï¼‰"><a href="#4-é…ç½®ç¼“å­˜ï¼ˆapplication-ymlï¼‰" class="headerlink" title="4. é…ç½®ç¼“å­˜ï¼ˆapplication.ymlï¼‰"></a>4. é…ç½®ç¼“å­˜ï¼ˆapplication.ymlï¼‰</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">cache-names:</span> <span class="string">user</span>  <span class="comment"># ä½œç”¨ï¼šå®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªç¼“å­˜åç§°ï¼ˆç¼“å­˜ç©ºé—´ï¼‰ï¼Œåœ¨æ³¨è§£å¦‚ @Cacheable(cacheNames=&quot;user&quot;) ä¸­å¼•ç”¨ã€‚ ç¤ºä¾‹å«ä¹‰ï¼šä½ è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªç¼“å­˜åç§°å« userï¼Œç”¨äºç”¨æˆ·ç›¸å…³æ•°æ®ç¼“å­˜ã€‚</span></span><br><span class="line">    <span class="attr">caffeine:</span></span><br><span class="line">      <span class="comment"># ä½œç”¨ï¼šé…ç½® Caffeine ç¼“å­˜çš„å‚æ•°ï¼Œä½¿ç”¨ä¸€ç§ç±»ä¼¼ Java é…ç½®çš„ DSL é£æ ¼å­—ç¬¦ä¸²ï¼Œå’Œ Caffeine.newBuilder().xxx() ä¸€ä¸€å¯¹åº”ã€‚</span></span><br><span class="line">      <span class="comment"># maximumSize=1000 è®¾ç½®ç¼“å­˜æœ€å¤§æ¡ç›®æ•°ä¸º 1000ï¼Œè¶…è¿‡åè§¦å‘æ·˜æ±°ï¼ˆåŸºäº W-TinyLFUï¼‰</span></span><br><span class="line">      <span class="comment"># expireAfterWrite=60s å†™å…¥å 60 ç§’è¿‡æœŸï¼ˆä¸ç®¡æœ‰æ²¡æœ‰è¢«è®¿é—®ï¼‰</span></span><br><span class="line">      <span class="attr">spec:</span> <span class="string">maximumSize=1000,expireAfterWrite=60s</span>  </span><br></pre></td></tr></table></figure><h2 id="âœ…-ä¸‰ã€ç¼“å­˜å­˜å‚¨æ–¹æ¡ˆ"><a href="#âœ…-ä¸‰ã€ç¼“å­˜å­˜å‚¨æ–¹æ¡ˆ" class="headerlink" title="âœ… ä¸‰ã€ç¼“å­˜å­˜å‚¨æ–¹æ¡ˆ"></a>âœ… ä¸‰ã€ç¼“å­˜å­˜å‚¨æ–¹æ¡ˆ</h2><p>Spring Cache æ˜¯æŠ½è±¡æ¥å£ï¼Œåº•å±‚å¯æ¥å…¥å¤šç§ç¼“å­˜æ–¹æ¡ˆï¼š</p><table><thead><tr><th>æ–¹æ¡ˆ</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>Caffeine</td><td>æœ¬åœ°ç¼“å­˜ï¼Œæ€§èƒ½æé«˜ï¼Œé€‚åˆå•ä½“åº”ç”¨</td></tr><tr><td>EhCache</td><td>æœ¬åœ°ç¼“å­˜ï¼ŒåŠŸèƒ½ä¸°å¯Œä½†ä¸å¦‚ Caffeine å¿«</td></tr><tr><td>Redis</td><td>åˆ†å¸ƒå¼ç¼“å­˜ï¼Œé€‚åˆé›†ç¾¤éƒ¨ç½²ã€é«˜å¹¶å‘ç¯å¢ƒ</td></tr><tr><td>Guava</td><td>è½»é‡ä½†å·²ä¸æ¨èï¼ŒCaffeine æ˜¯å®ƒçš„æ›¿ä»£è€…</td></tr></tbody></table><h2 id="âœ…-å››ã€è¿›é˜¶åŠŸèƒ½"><a href="#âœ…-å››ã€è¿›é˜¶åŠŸèƒ½" class="headerlink" title="âœ… å››ã€è¿›é˜¶åŠŸèƒ½"></a>âœ… å››ã€è¿›é˜¶åŠŸèƒ½</h2><ul><li><p><strong>æ¡ä»¶ç¼“å­˜</strong>ï¼š@Cacheable(condition &#x3D; â€œ#id &gt; 100â€)</p></li><li><p><strong>ç¼“å­˜ä¸ºç©ºä¸å­˜</strong>ï¼šunless &#x3D; â€œ#result &#x3D;&#x3D; nullâ€</p></li><li><p><strong>ç»„åˆæ³¨è§£</strong>ï¼š@Caching(cacheable &#x3D; {â€¦}, evict &#x3D; {â€¦})</p></li><li><p><strong>æ‰‹åŠ¨ç¼“å­˜</strong>ï¼šä½¿ç”¨ CacheManager æ“ä½œç¼“å­˜å¯¹è±¡</p></li></ul><h2 id="âœ…-äº”ã€æ€»ç»“"><a href="#âœ…-äº”ã€æ€»ç»“" class="headerlink" title="âœ… äº”ã€æ€»ç»“"></a>âœ… äº”ã€æ€»ç»“</h2><table><thead><tr><th>åŠŸèƒ½åœºæ™¯</th><th>å»ºè®®ä½¿ç”¨</th></tr></thead><tbody><tr><td>æœ¬åœ°ç¼“å­˜</td><td>Caffeine</td></tr><tr><td>åˆ†å¸ƒå¼ç¼“å­˜</td><td>Redis</td></tr><tr><td>å•ä½“è½»é‡é¡¹ç›®</td><td>Spring Cache + Caffeine</td></tr><tr><td>é«˜å¹¶å‘åˆ†å¸ƒå¼ç³»ç»Ÿ</td><td>Redis + è‡ªå®šä¹‰æ³¨è§£</td></tr></tbody></table><h2 id="âœ…-å…­ã€å®æˆ˜"><a href="#âœ…-å…­ã€å®æˆ˜" class="headerlink" title="âœ… å…­ã€å®æˆ˜"></a>âœ… å…­ã€å®æˆ˜</h2><p>ä¸€ä¸ªå®Œæ•´çš„ Spring Boot é¡¹ç›®ç¤ºä¾‹ï¼Œé›†æˆ Spring Cache + Caffeineï¼Œæ¨¡æ‹Ÿä¸€ä¸ª ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢ç¼“å­˜çš„ä¸šåŠ¡åœºæ™¯ã€‚</p><p>ğŸ§± é¡¹ç›®ç»“æ„ï¼ˆç®€åŒ–å•æ¨¡å—ï¼‰</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">spring-cache-demo/</span><br><span class="line">â”œâ”€â”€ <span class="attribute">src</span>/</span><br><span class="line">â”‚   â”œâ”€â”€ <span class="selector-tag">main</span>/</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ java/</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ com/example/cache/</span><br><span class="line">â”‚   â”‚   â”‚       â”œâ”€â”€ CacheApplication<span class="selector-class">.java</span></span><br><span class="line">â”‚   â”‚   â”‚       â”œâ”€â”€ controller/</span><br><span class="line">â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UserController<span class="selector-class">.java</span></span><br><span class="line">â”‚   â”‚   â”‚       â”œâ”€â”€ service/</span><br><span class="line">â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UserService<span class="selector-class">.java</span></span><br><span class="line">â”‚   â”‚   â”‚       â””â”€â”€ model/</span><br><span class="line">â”‚   â”‚   â”‚           â””â”€â”€ User<span class="selector-class">.java</span></span><br><span class="line">â”‚   â””â”€â”€ resources/</span><br><span class="line">â”‚       â””â”€â”€ application<span class="selector-class">.yml</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>1ï¸âƒ£ å¼•å…¥ä¾èµ–ï¼ˆpom.xmlï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cache-demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.ben-manes.caffeine<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>caffeine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2ï¸âƒ£ å¯åŠ¨ç±» CacheApplication.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.cache;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.EnableCaching;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableCaching</span> <span class="comment">// å¼€å¯ç¼“å­˜æ³¨è§£æ”¯æŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CacheApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(CacheApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3ï¸âƒ£ ç”¨æˆ·æ¨¡å‹ User.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.cache.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(Long id, String name, String email)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// getterã€setterçœç•¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>4ï¸âƒ£ æœåŠ¡ç±» UserService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.cache.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.cache.model.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.Cacheable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.CachePut;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.CacheEvict;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿä»æ•°æ®åº“è·å–æ•°æ®</span></span><br><span class="line">    <span class="meta">@Cacheable(cacheNames = &quot;user&quot;, key = &quot;#id&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUserById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;â—æŸ¥è¯¢æ•°æ®åº“è·å–ç”¨æˆ·ä¿¡æ¯&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(id, <span class="string">&quot;User&quot;</span> + id, <span class="string">&quot;user&quot;</span> + id + <span class="string">&quot;@example.com&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°ç”¨æˆ·ä¿¡æ¯å¹¶æ›´æ–°ç¼“å­˜</span></span><br><span class="line">    <span class="meta">@CachePut(cacheNames = &quot;user&quot;, key = &quot;#user.id&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">updateUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸ”„æ›´æ–°ç”¨æˆ·å¹¶åˆ·æ–°ç¼“å­˜&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤ç”¨æˆ·ç¼“å­˜</span></span><br><span class="line">    <span class="meta">@CacheEvict(cacheNames = &quot;user&quot;, key = &quot;#id&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;âŒåˆ é™¤ç¼“å­˜&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5ï¸âƒ£ æ§åˆ¶å™¨ UserController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.cache.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.cache.model.User;</span><br><span class="line"><span class="keyword">import</span> com.example.cache.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> UserService userService;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserController</span><span class="params">(UserService userService)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userService = userService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userService.getUserById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">updateUser</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userService.updateUser(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteUser</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">        userService.deleteUser(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;deleted&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>6ï¸âƒ£ é…ç½®æ–‡ä»¶ application.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">caffeine</span></span><br><span class="line">    <span class="attr">cache-names:</span> <span class="string">user</span></span><br><span class="line">    <span class="attr">caffeine:</span></span><br><span class="line">      <span class="attr">spec:</span> <span class="string">maximumSize=1000,expireAfterWrite=60s</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>âœ… æµ‹è¯•æµç¨‹</p><p>1.ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼šGET &#x2F;users&#x2F;1</p><pre><code>â†’ æ§åˆ¶å°è¾“å‡ºâ€œæŸ¥è¯¢æ•°æ®åº“è·å–ç”¨æˆ·ä¿¡æ¯â€</code></pre><p>2.ç¬¬äºŒæ¬¡è¯·æ±‚ï¼šGET &#x2F;users&#x2F;1</p><pre><code>â†’ ä¸å†è¾“å‡ºï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜ç»“æœ</code></pre><p>3.æ›´æ–°ç”¨æˆ·ï¼šPUT &#x2F;usersï¼Œæäº¤ JSONï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ–°åå­—&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;new@example.com&quot;</span> <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>4.åˆ é™¤ç¼“å­˜ï¼šDELETE &#x2F;users&#x2F;1</p><pre><code> â†’ æ§åˆ¶å°è¾“å‡ºâ€œåˆ é™¤ç¼“å­˜â€</code></pre><h2 id="âœ…-ä¸ƒã€Cacheæ³¨è§£è¯¦è§£"><a href="#âœ…-ä¸ƒã€Cacheæ³¨è§£è¯¦è§£" class="headerlink" title="âœ… ä¸ƒã€Cacheæ³¨è§£è¯¦è§£"></a>âœ… ä¸ƒã€Cacheæ³¨è§£è¯¦è§£</h2><p>âœ… @Cacheable å‚æ•°è¯¦è§£ï¼ˆç”¨äºè¯»å–ç¼“å­˜ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Cacheable(</span></span><br><span class="line"><span class="meta">    value = &quot;user&quot;,        // æŒ‡å®šç¼“å­˜çš„åç§°ï¼ˆå¯ä»¥æ˜¯å¤šä¸ªï¼‰ï¼Œå³ cacheNames çš„åˆ«å</span></span><br><span class="line"><span class="meta">    key = &quot;#id&quot;,           // SpEL è¡¨è¾¾å¼å®šä¹‰ç¼“å­˜ key</span></span><br><span class="line"><span class="meta">    condition = &quot;#id &gt; 0&quot;, // æ»¡è¶³æ¡ä»¶æ—¶æ‰ç¼“å­˜</span></span><br><span class="line"><span class="meta">    unless = &quot;#result == null&quot;, // è¿”å›å€¼ä¸ä¸º null æ‰ç¼“å­˜</span></span><br><span class="line"><span class="meta">    sync = false           // æ˜¯å¦åŒæ­¥åŠ è½½ï¼ˆé¿å…ç¼“å­˜å‡»ç©¿ï¼‰</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">getUserById</span><span class="params">(Long id)</span> &#123; ... &#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>value</code> &#x2F; <code>cacheNames</code></td><td>ç¼“å­˜åç§°ï¼Œå¯¹åº” <code>@EnableCaching</code> é…ç½®çš„ç¼“å­˜ç®¡ç†å™¨ï¼ˆCacheManagerï¼‰ä¸­å®šä¹‰çš„ç¼“å­˜ç©ºé—´</td></tr><tr><td><code>key</code></td><td>ç¼“å­˜ keyï¼Œä½¿ç”¨ Spring Expression Languageï¼ˆSpELï¼‰è¡¨è¾¾å¼ï¼ˆå¦‚ï¼š<code>#id</code>, <code>#user.name</code>ï¼‰</td></tr><tr><td><code>keyGenerator</code></td><td>æŒ‡å®š key ç”Ÿæˆå™¨ï¼ˆå’Œ key äºŒé€‰ä¸€ï¼‰</td></tr><tr><td><code>condition</code></td><td>ç¼“å­˜æ¡ä»¶ï¼šæ»¡è¶³æ—¶æ‰æ‰§è¡Œç¼“å­˜ï¼Œå¦‚ <code>#id != null</code></td></tr><tr><td><code>unless</code></td><td>æ’é™¤æ¡ä»¶ï¼šç»“æœæ»¡è¶³æ—¶ä¸ç¼“å­˜ï¼Œå¦‚ <code>#result == null</code></td></tr><tr><td><code>sync</code></td><td>æ˜¯å¦å¯ç”¨åŒæ­¥ç¼“å­˜ï¼ˆé˜²æ­¢ç¼“å­˜å‡»ç©¿ï¼Œå¤šçº¿ç¨‹åŒæ—¶æŸ¥åŒä¸€ keyï¼‰ã€ä»…é™æŸäº›ç¼“å­˜å®ç°æ”¯æŒï¼Œå¦‚ Caffeine æ”¯æŒã€‘</td></tr></tbody></table><p>âœ… @CachePut å‚æ•°è¯¦è§£ï¼ˆç”¨äºæ›´æ–°ç¼“å­˜ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CachePut(</span></span><br><span class="line"><span class="meta">    value = &quot;user&quot;,</span></span><br><span class="line"><span class="meta">    key = &quot;#user.id&quot;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">updateUser</span><span class="params">(User user)</span> &#123; ... &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸ @Cacheable åŸºæœ¬ç›¸åŒï¼Œä½†å§‹ç»ˆæ‰§è¡Œæ–¹æ³•ä½“å¹¶æ›´æ–°ç¼“å­˜</p><p>é€‚ç”¨äºâ€œæ›´æ–°æ•°æ®åº“å¹¶åŒæ­¥æ›´æ–°ç¼“å­˜â€çš„åœºæ™¯</p><p>âœ… @CacheEvict å‚æ•°è¯¦è§£ï¼ˆç”¨äºåˆ é™¤ç¼“å­˜ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CacheEvict(</span></span><br><span class="line"><span class="meta">    value = &quot;user&quot;,</span></span><br><span class="line"><span class="meta">    key = &quot;#id&quot;,</span></span><br><span class="line"><span class="meta">    condition = &quot;#id != null&quot;,</span></span><br><span class="line"><span class="meta">    beforeInvocation = false</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">(Long id)</span> &#123; ... &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>value</code></td><td>ç¼“å­˜å</td></tr><tr><td><code>key</code></td><td>æŒ‡å®šè¦åˆ é™¤çš„ key</td></tr><tr><td><code>allEntries</code></td><td>æ˜¯å¦æ¸…é™¤æ‰€æœ‰ç¼“å­˜é¡¹ï¼Œå¦‚ï¼š<code>true</code> è¡¨ç¤ºæ¸…ç©ºæ•´ä¸ª cache</td></tr><tr><td><code>beforeInvocation</code></td><td>æ˜¯å¦åœ¨æ–¹æ³•æ‰§è¡Œå‰æ¸…é™¤ç¼“å­˜ï¼Œé»˜è®¤æ˜¯ falseï¼ˆå³æ‰§è¡Œåæ‰æ¸…é™¤ï¼‰</td></tr><tr><td>å¸¸è§ç»„åˆç”¨æ³•ï¼š</td><td></td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CacheEvict(value = &quot;user&quot;, allEntries = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clearCache</span><span class="params">()</span> &#123; &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ğŸ”„ å¤šä¸ªæ³¨è§£ç»„åˆï¼š@Caching<br>å¦‚æœä½ æƒ³ç»„åˆå¤šä¸ªç¼“å­˜æ³¨è§£ï¼ˆå¦‚è¯»ä¸€ä¸ªï¼Œæ¸…é™¤å¦ä¸€ä¸ªï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ @Cachingï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Caching(</span></span><br><span class="line"><span class="meta">    cacheable = &#123;</span></span><br><span class="line"><span class="meta">        @Cacheable(value = &quot;user&quot;, key = &quot;#id&quot;)</span></span><br><span class="line"><span class="meta">    &#125;,</span></span><br><span class="line"><span class="meta">    evict = &#123;</span></span><br><span class="line"><span class="meta">        @CacheEvict(value = &quot;userList&quot;, allEntries = true)</span></span><br><span class="line"><span class="meta">    &#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">getUserById</span><span class="params">(Long id)</span> &#123; ... &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ğŸ“Œ SpEL è¡¨è¾¾å¼è¯´æ˜</p><table><thead><tr><th>è¡¨è¾¾å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>#p0</code> &#x2F; <code>#a0</code></td><td>ç¬¬ä¸€ä¸ªå‚æ•°</td></tr><tr><td><code>#id</code></td><td>åç§°ä¸º id çš„å‚æ•°</td></tr><tr><td><code>#user.name</code></td><td>å‚æ•° user çš„ name å±æ€§</td></tr><tr><td><code>#result</code></td><td>æ–¹æ³•è¿”å›å€¼ï¼ˆonly <code>unless</code>ï¼‰</td></tr></tbody></table><p>âœ… ç¤ºä¾‹å›é¡¾</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Cacheable(value = &quot;user&quot;, key = &quot;#id&quot;, unless = &quot;#result == null&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">(Long id)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@CachePut(value = &quot;user&quot;, key = &quot;#user.id&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">updateUser</span><span class="params">(User user)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@CacheEvict(value = &quot;user&quot;, key = &quot;#id&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">(Long id)</span> &#123; ... &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="âœ…-å…«ã€ä½¿ç”¨ç»†èŠ‚è¯¦è§£"><a href="#âœ…-å…«ã€ä½¿ç”¨ç»†èŠ‚è¯¦è§£" class="headerlink" title="âœ… å…«ã€ä½¿ç”¨ç»†èŠ‚è¯¦è§£"></a>âœ… å…«ã€ä½¿ç”¨ç»†èŠ‚è¯¦è§£</h2><p>âš™ï¸ 1. Cache é…ç½®ç±»</p><p>springboot å¯ä»¥æœ‰propertiesé…ç½®æ–¹å¼ï¼Œæ”¹æˆbeanæ–¹å¼é…ç½®</p><p>âœ…  ä½¿ç”¨ Java Config è‡ªå®šä¹‰ Caffeine Cache</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.github.benmanes.caffeine.cache.Caffeine;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.Cache;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.CacheManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.EnableCaching;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.caffeine.CaffeineCache;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.concurrent.ConcurrentMapCacheManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CacheConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»º Caffeine ç¼“å­˜ç®¡ç†å™¨</span></span><br><span class="line"><span class="comment">     * è‡ªå®šä¹‰ä¸€ä¸ª Spring çš„ç¼“å­˜ç®¡ç†å™¨ CacheManagerï¼Œ</span></span><br><span class="line"><span class="comment">     * å½“ç¼“å­˜åç§°ä¸º &quot;user&quot; æ—¶ï¼Œä½¿ç”¨æ‰‹åŠ¨åˆ›å»ºçš„ CaffeineCache å®ä¾‹ï¼›</span></span><br><span class="line"><span class="comment">     * å¦åˆ™ä½¿ç”¨é»˜è®¤çš„å†…å­˜ Map ç¼“å­˜ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CacheManager <span class="title function_">cacheManager</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">CaffeineCache</span> <span class="variable">userCache</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CaffeineCache</span>(<span class="string">&quot;user&quot;</span>,  <span class="comment">// åˆ›å»ºäº†ä¸€ä¸ªåä¸º user çš„ç¼“å­˜å®ä¾‹ï¼Œä½¿ç”¨äº† Caffeine æä¾›çš„æ„å»ºå™¨</span></span><br><span class="line">                Caffeine.newBuilder()</span><br><span class="line">                        .initialCapacity(<span class="number">100</span>) <span class="comment">// ç¼“å­˜å®¹å™¨çš„åˆå§‹å¤§å°ï¼Œä¼˜åŒ–æ‰©å®¹æ€§èƒ½</span></span><br><span class="line">                        .maximumSize(<span class="number">1000</span>)  <span class="comment">// æœ€å¤šç¼“å­˜ 1000 æ¡è®°å½•ï¼Œè¶…å‡ºä¼šä½¿ç”¨ Caffeine çš„ W-TinyLFU æ·˜æ±°ç®—æ³•ç§»é™¤æœ€ä¸å¸¸ç”¨çš„æ¡ç›®ã€‚</span></span><br><span class="line">                        .expireAfterWrite(<span class="number">60</span>, TimeUnit.SECONDS) <span class="comment">// å†™å…¥å 60 ç§’è‡ªåŠ¨è¿‡æœŸï¼ˆä¸ç®¡æ˜¯å¦è®¿é—®ï¼‰ã€‚</span></span><br><span class="line">                        .recordStats()  <span class="comment">// å¯ç”¨ç»Ÿè®¡åŠŸèƒ½ï¼ˆå‘½ä¸­ç‡ã€ç¼“å­˜æ•°é‡ç­‰ï¼Œè°ƒè¯•å’Œç›‘æ§å¯ç”¨ï¼‰ã€‚</span></span><br><span class="line">                        .build());  <span class="comment">// æœ€ç»ˆæ„å»ºå‡ºä¸€ä¸ª Cache&lt;Object, Object&gt;ã€‚</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//  Caffeine ç¼“å­˜è¢«åŒ…è£…æˆ Spring çš„ CaffeineCache å®ä¾‹ï¼ˆSpring ä½¿ç”¨è‡ªå·±çš„ç¼“å­˜æ¥å£ org.springframework.cache.Cache è¿›è¡Œç»Ÿä¸€æŠ½è±¡ï¼‰ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ConcurrentMapCacheManager</span>() &#123; <span class="comment">// åˆ›å»ºäº†ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±» ConcurrentMapCacheManagerï¼ˆSpring é»˜è®¤çš„åŸºäºå†…å­˜çš„ç¼“å­˜ç®¡ç†å™¨ï¼‰ï¼Œå¹¶é‡å†™äº†å…¶ createConcurrentMapCache æ–¹æ³•ï¼š</span></span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> Cache <span class="title function_">createConcurrentMapCache</span><span class="params">(<span class="keyword">final</span> String name)</span> &#123;</span><br><span class="line">                <span class="comment">// æ¯å½“ç³»ç»Ÿä½¿ç”¨ @Cacheable(cacheNames = &quot;user&quot;) æ—¶ ä¼šè§¦å‘ createConcurrentMapCache(&quot;user&quot;) åˆ¤æ–­åç§°æ˜¯å¦æ˜¯ &quot;user&quot;ï¼Œæ˜¯å°±è¿”å›æˆ‘ä»¬æ‰‹åŠ¨æ„å»ºçš„ CaffeineCacheã€‚</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="string">&quot;user&quot;</span>.equals(name)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> userCache;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å¦‚æœæ˜¯å…¶ä»–ç¼“å­˜åï¼Œåˆ™èµ°çˆ¶ç±»é»˜è®¤å®ç°ï¼ˆä½¿ç”¨ ConcurrentHashMap çš„ç®€å•å†…å­˜ç¼“å­˜ï¼Œä¸å¸¦è¿‡æœŸç­‰ç‰¹æ€§ï¼‰ã€‚</span></span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">super</span>.createConcurrentMapCache(name);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… æ€»ç»“ï¼šä½¿ç”¨ Bean çš„ä¼˜ç‚¹</p><table><thead><tr><th>ä¼˜ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>âœ… æ›´çµæ´»</td><td>å¯ç”¨ Java ä»£ç åŠ¨æ€å®šä¹‰ç¼“å­˜é€»è¾‘</td></tr><tr><td>âœ… æ— éœ€å†™é…ç½®æ–‡ä»¶</td><td>ç»Ÿä¸€ç®¡ç†æ›´æ¸…æ™°</td></tr><tr><td>âœ… æ”¯æŒå¤šä¸ªç¼“å­˜ç­–ç•¥</td><td>æ¯ä¸ªç¼“å­˜å¯ç”¨ä¸åŒçš„é…ç½®</td></tr></tbody></table><p>ğŸ§  æç¤ºï¼šå¦‚ä½•æ”¯æŒå¤šä¸ªä¸åŒç­–ç•¥çš„ Caffeine ç¼“å­˜ï¼Ÿ</p><p>è¦å®ç° Spring Cache + Caffeine ä¸­ä¸åŒç¼“å­˜åä½¿ç”¨ä¸åŒç­–ç•¥çš„é…ç½®æ–¹å¼ï¼Œå’±ä»¬å¯ä»¥æ”¹å†™é…ç½®ï¼Œä½¿å…¶æ›´é€šç”¨ä¸”å¯æ‰©å±• â€”â€” æ¯”å¦‚ï¼š</p><p>âœ… å¤šç¼“å­˜åï¼Œä¸åŒç­–ç•¥çš„ Caffeine ç¼“å­˜ç®¡ç†å™¨</p><p>ğŸ‘‡ ç¤ºä¾‹ï¼šæ¯ä¸ªç¼“å­˜åå¯¹åº”ä¸€ä¸ªä¸åŒçš„ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CacheConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CacheManager <span class="title function_">cacheManager</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// æ„å»ºä¸åŒçš„ç¼“å­˜å®ä¾‹</span></span><br><span class="line">        Map&lt;String, CaffeineCache&gt; cacheMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// user ç¼“å­˜ï¼š60ç§’åè¿‡æœŸï¼Œæœ€å¤§1000æ¡</span></span><br><span class="line">        cacheMap.put(<span class="string">&quot;user&quot;</span>, <span class="keyword">new</span> <span class="title class_">CaffeineCache</span>(<span class="string">&quot;user&quot;</span>,</span><br><span class="line">                Caffeine.newBuilder()</span><br><span class="line">                        .maximumSize(<span class="number">1000</span>)</span><br><span class="line">                        .expireAfterWrite(<span class="number">60</span>, TimeUnit.SECONDS)</span><br><span class="line">                        .build()));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// product ç¼“å­˜ï¼š5åˆ†é’Ÿè¿‡æœŸï¼Œæœ€å¤§500æ¡</span></span><br><span class="line">        cacheMap.put(<span class="string">&quot;product&quot;</span>, <span class="keyword">new</span> <span class="title class_">CaffeineCache</span>(<span class="string">&quot;product&quot;</span>,</span><br><span class="line">                Caffeine.newBuilder()</span><br><span class="line">                        .maximumSize(<span class="number">500</span>)</span><br><span class="line">                        .expireAfterWrite(<span class="number">5</span>, TimeUnit.MINUTES)</span><br><span class="line">                        .build()));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// order ç¼“å­˜ï¼š10åˆ†é’Ÿåå¤±æ•ˆï¼Œæœ€å¤§200æ¡</span></span><br><span class="line">        cacheMap.put(<span class="string">&quot;order&quot;</span>, <span class="keyword">new</span> <span class="title class_">CaffeineCache</span>(<span class="string">&quot;order&quot;</span>,</span><br><span class="line">                Caffeine.newBuilder()</span><br><span class="line">                        .maximumSize(<span class="number">200</span>)</span><br><span class="line">                        .expireAfterWrite(<span class="number">10</span>, TimeUnit.MINUTES)</span><br><span class="line">                        .build()));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ CacheManagerï¼Œæ”¯æŒä¸Šé¢è¿™äº›ç­–ç•¥</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleCacheManager</span>() &#123;&#123;</span><br><span class="line">            setCaches(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(cacheMap.values()));</span><br><span class="line">        &#125;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>âœ… æ€»ç»“å¯¹æ¯”</p><table><thead><tr><th>é…ç½®æ–¹å¼</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><code>application.yml</code> é…ç½®</td><td>ç®€å•ã€é€‚åˆç»Ÿä¸€ç­–ç•¥</td></tr><tr><td>è‡ªå®šä¹‰ <code>CacheManager</code> Bean</td><td>æ›´çµæ´»ã€æ”¯æŒä¸åŒç¼“å­˜åè‡ªå®šä¹‰ç­–ç•¥ï¼Œé€‚åˆä¸­å¤§å‹é¡¹ç›®éœ€æ±‚</td></tr></tbody></table><p>âœ… recordStats æŸ¥çœ‹</p><p>ä¸€ã€å¦‚ä½•å¯ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Caffeine.newBuilder()</span><br><span class="line">    .maximumSize(<span class="number">1000</span>)</span><br><span class="line">    .expireAfterWrite(<span class="number">60</span>, TimeUnit.SECONDS)</span><br><span class="line">    .recordStats() <span class="comment">// âœ… å¼€å¯ç»Ÿè®¡</span></span><br><span class="line">    .build();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>äºŒã€å¦‚ä½•è·å–ç»Ÿè®¡æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> CacheManager cacheManager;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printUserCacheStats</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">CaffeineCache</span> <span class="variable">caffeineCache</span> <span class="operator">=</span> (CaffeineCache) cacheManager.getCache(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">    com.github.benmanes.caffeine.cache.Cache&lt;?, ?&gt; nativeCache = caffeineCache.getNativeCache();</span><br><span class="line"></span><br><span class="line">    <span class="type">CacheStats</span> <span class="variable">stats</span> <span class="operator">=</span> nativeCache.stats();</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;å‘½ä¸­æ¬¡æ•°ï¼š&quot;</span> + stats.hitCount());</span><br><span class="line">    System.out.println(<span class="string">&quot;æœªå‘½ä¸­æ¬¡æ•°ï¼š&quot;</span> + stats.missCount());</span><br><span class="line">    System.out.println(<span class="string">&quot;å‘½ä¸­ç‡ï¼š&quot;</span> + stats.hitRate());</span><br><span class="line">    System.out.println(<span class="string">&quot;åŠ è½½æˆåŠŸæ¬¡æ•°ï¼š&quot;</span> + stats.loadSuccessCount());</span><br><span class="line">    System.out.println(<span class="string">&quot;åŠ è½½å¤±è´¥æ¬¡æ•°ï¼š&quot;</span> + stats.loadFailureCount());</span><br><span class="line">    System.out.println(<span class="string">&quot;å¹³å‡åŠ è½½æ—¶é—´ï¼š&quot;</span> + stats.averageLoadPenalty() + <span class="string">&quot;ns&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;è¢«é©±é€æ¬¡æ•°ï¼š&quot;</span> + stats.evictionCount());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‰ã€å¦‚æœä½ æƒ³å®æ—¶æŸ¥çœ‹ï¼šå»ºè®®åŠ ä¸ªæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/cache&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CacheStatsController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CacheManager cacheManager;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/stats/&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">getCacheStats</span><span class="params">(<span class="meta">@PathVariable</span> String name)</span> &#123;</span><br><span class="line">        <span class="type">CaffeineCache</span> <span class="variable">cache</span> <span class="operator">=</span> (CaffeineCache) cacheManager.getCache(name);</span><br><span class="line">        com.github.benmanes.caffeine.cache.Cache&lt;?, ?&gt; nativeCache = cache.getNativeCache();</span><br><span class="line">        <span class="type">CacheStats</span> <span class="variable">stats</span> <span class="operator">=</span> nativeCache.stats();</span><br><span class="line"></span><br><span class="line">        Map&lt;String, Object&gt; result = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        result.put(<span class="string">&quot;hitCount&quot;</span>, stats.hitCount());</span><br><span class="line">        result.put(<span class="string">&quot;missCount&quot;</span>, stats.missCount());</span><br><span class="line">        result.put(<span class="string">&quot;hitRate&quot;</span>, stats.hitRate());</span><br><span class="line">        result.put(<span class="string">&quot;evictionCount&quot;</span>, stats.evictionCount());</span><br><span class="line">        result.put(<span class="string">&quot;loadSuccessCount&quot;</span>, stats.loadSuccessCount());</span><br><span class="line">        result.put(<span class="string">&quot;loadFailureCount&quot;</span>, stats.loadFailureCount());</span><br><span class="line">        result.put(<span class="string">&quot;averageLoadPenalty(ns)&quot;</span>, stats.averageLoadPenalty());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> Cache </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2025/05/16/hello-world/"/>
      <url>/2025/05/16/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>hexo</title>
      <link href="/2025/05/13/hello/"/>
      <url>/2025/05/13/hello/</url>
      
        <content type="html"><![CDATA[<h3 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World!"></a>Hello World!</h3><p>Welcome to [Hexo]</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> è¯´è¯´ </tag>
            
            <tag> è®°å½• </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
